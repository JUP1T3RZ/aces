<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Jace ❤️</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --pastel-pink: #ffd6e7;
            --dark-pink: #ff85a2;
            --light-pink: #ffe4ec;
            --accent-pink: #ff4d7a;
            --text-color: #333;
            --gray-text: #777;
            --card-bg: rgba(255, 255, 255, 0.9);
            --shadow: 0 8px 32px rgba(255, 105, 180, 0.1);
        }

        /* Black theme with red variables */
        .black-theme {
            --pastel-pink: #1a0a0a;
            --dark-pink: #8b0000;
            --light-pink: #2a0a0a;
            --accent-pink: #ff3333;
            --text-color: #ffffff;
            --gray-text: #bbbbbb;
            --card-bg: rgba(30, 10, 10, 0.95);
            --shadow: 0 8px 32px rgba(255, 0, 0, 0.3);
        }

        /* Theme-specific variables */
        .theme-true-colors {
            --accent-pink: #ff6b6b;
            --card-bg: rgba(255, 255, 255, 0.9);
        }

        .theme-this-town {
            --accent-pink: #8b4513;
            --card-bg: rgba(245, 222, 179, 0.9);
        }

        .theme-naiilang {
            --accent-pink: #ff3333;
            --card-bg: rgba(255, 235, 235, 0.9);
        }

        .theme-cowboy-in-la {
            --accent-pink: #228b22;
            --card-bg: rgba(255, 240, 240, 0.9);
        }

        .theme-anything-4-u {
            --accent-pink: #ff4500;
            --card-bg: rgba(255, 250, 240, 0.9);
        }

        .theme-a-couple-minutes {
            --accent-pink: #a9a9a9;
            --card-bg: rgba(248, 248, 255, 0.9);
        }

        .theme-godspeed {
            --accent-pink: #90ee90;
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        /* A Prayer Theme - Pure White */
        .theme-a-prayer {
            --pastel-pink: #ffffff;
            --dark-pink: #ffffff;
            --light-pink: #ffffff;
            --accent-pink: #ff3333;
            --text-color: #333333;
            --gray-text: #666666;
            --card-bg: rgba(255, 255, 255, 0.98);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        /* White theme for cards 24-26 */
        .theme-white-continue {
            --pastel-pink: #ffffff;
            --dark-pink: #ffffff;
            --light-pink: #ffffff;
            --accent-pink: #ff3333;
            --text-color: #333333;
            --gray-text: #666666;
            --card-bg: rgba(255, 255, 255, 0.98);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--pastel-pink);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 214, 231, 0.8) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 133, 162, 0.6) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.9) 0%, transparent 30%);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
            transition: background-color 1.5s ease, background-image 1.5s ease;
            position: relative;
        }

        /* True Colors Theme - Rainbow */
        .theme-true-colors .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, 
                #ff0000, #ff9900, #ffff00, #00ff00, 
                #00ffff, #0000ff, #9900ff, #ff00ff);
            background-size: 400% 400%;
            animation: rainbowShift 20s ease infinite;
            opacity: 0.3;
        }

        /* This Town Theme - Light Brown/Tan */
        .theme-this-town .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, 
                #d2b48c 0%, #f5deb3 25%, #deb887 50%, #cd853f 75%, #8b4513 100%);
            background-size: 300% 300%;
            animation: brownShift 25s ease infinite;
            opacity: 0.5;
        }

        /* Naiilang Theme - Red */
        .theme-naiilang .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, 
                #8b0000 0%, #b22222 25%, #dc143c 50%, #ff0000 75%, #ff6347 100%);
            background-size: 400% 400%;
            animation: redPulse 15s ease infinite;
            opacity: 0.4;
        }

        /* Cowboy in LA Theme - Green, Red, Orange */
        .theme-cowboy-in-la .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, 
                #228b22 0%, #32cd32 25%, #ff4500 50%, #ff6347 75%, #ffa500 100%);
            background-size: 300% 300%;
            animation: cowboyRide 30s ease infinite;
            opacity: 0.4;
        }

        /* Anything 4 U Theme - Red, Orange, Green */
        .theme-anything-4-u .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, 
                #ff0000 0%, #ff4500 20%, #ff8c00 40%, #32cd32 60%, #228b22 80%, #006400 100%);
            background-size: 400% 400%;
            animation: anythingShift 20s ease infinite;
            opacity: 0.4;
        }

        /* A Couple Minutes Theme - Grey with Warm Pink */
        .theme-a-couple-minutes .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, 
                #808080 0%, #a9a9a9 25%, #c0c0c0 50%, #d3d3d3 75%, #ffb6c1 100%);
            background-size: 300% 300%;
            animation: coupleMinutes 25s ease infinite;
            opacity: 0.5;
        }

        /* Godspeed Theme - White with Light Green */
        .theme-godspeed .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, 
                #ffffff 0%, #f8f8f8 25%, #f0f0f0 50%, #e8e8e8 75%, #90ee90 100%);
            background-size: 400% 400%;
            animation: godspeedFloat 25s ease infinite;
            opacity: 0.7;
        }

        /* A Prayer Theme - Pure White with subtle gradient animation */
        .theme-a-prayer .dynamic-background,
        .theme-white-continue .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, 
                #ffffff 0%, #f8f8f8 25%, #f0f0f0 50%, #e8e8e8 75%, #ffffff 100%);
            background-size: 400% 400%;
            animation: whiteShift 20s ease infinite;
            opacity: 1;
        }

        /* Animations */
        @keyframes rainbowShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes brownShift {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        @keyframes redPulse {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; filter: brightness(1.1); }
            100% { background-position: 0% 0%; }
        }

        @keyframes cowboyRide {
            0% { background-position: 0% 0%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }

        @keyframes anythingShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes coupleMinutes {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        @keyframes godspeedFloat {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        @keyframes whiteShift {
            0% { 
                background-position: 0% 0%;
                filter: brightness(1);
            }
            50% { 
                background-position: 100% 100%;
                filter: brightness(1.02);
            }
            100% { 
                background-position: 0% 0%;
                filter: brightness(1);
            }
        }

        /* Smooth gradient transition for theme change */
        body.theme-transition .dynamic-background {
            transition: background 1.5s ease, opacity 1.5s ease;
        }

        /* Firework effect animations */
        @keyframes firework {
            0% { 
                transform: translate(var(--x), var(--initialY));
                width: var(--initialSize);
                opacity: 1;
            }
            50% { 
                width: 0.5vmin;
                opacity: 1;
            }
            100% { 
                transform: translate(var(--x), var(--finalY));
                opacity: 0;
            }
        }

        @keyframes fireworkParticle {
            0% { 
                transform: translate(0, 0);
                opacity: 1;
            }
            50% { 
                opacity: 1;
            }
            100% { 
                transform: translate(var(--angle), var(--distance));
                opacity: 0;
            }
        }

        @keyframes specialTextGlow {
            0%, 100% { 
                color: #ff3333;
                text-shadow: 
                    0 0 10px #ff3333,
                    0 0 20px #ff3333,
                    0 0 30px #ff3333;
            }
            25% { 
                color: #ff9933;
                text-shadow: 
                    0 0 10px #ff9933,
                    0 0 20px #ff9933,
                    0 0 30px #ff9933;
            }
            50% { 
                color: #ffff33;
                text-shadow: 
                    0 0 10px #ffff33,
                    0 0 20px #ffff33,
                    0 0 30px #ffff33;
            }
            75% { 
                color: #33ff33;
                text-shadow: 
                    0 0 10px #33ff33,
                    0 0 20px #33ff33,
                    0 0 30px #33ff33;
            }
        }

        .special-text-container {
            text-align: center;
            margin: 20px 0;
            position: relative;
            z-index: 2;
        }

        .special-text {
            font-size: 1.8rem;
            font-weight: 900;
            color: #ff3333;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: specialTextGlow 3s infinite alternate;
            margin-bottom: 10px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            display: inline-block;
            position: relative;
            z-index: 3;
            font-family: 'Playfair Display', serif;
        }

        .ps-text {
            font-size: 1rem;
            color: var(--gray-text);
            font-style: italic;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px 15px;
            border-radius: 10px;
            display: inline-block;
        }

        .firework-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .firework {
            position: absolute;
            width: 5vmin;
            aspect-ratio: 1;
            background: 
                radial-gradient(circle, #ff3333 0.2vmin, #0000 0) 50% 0,
                radial-gradient(circle, #ff9933 0.2vmin, #0000 0) 100% 50%,
                radial-gradient(circle, #ffff33 0.2vmin, #0000 0) 50% 100%,
                radial-gradient(circle, #33ff33 0.2vmin, #0000 0) 0 50%,
                radial-gradient(circle, #3399ff 0.2vmin, #0000 0) 80% 90%,
                radial-gradient(circle, #9933ff 0.2vmin, #0000 0) 95% 16%,
                radial-gradient(circle, #ff33cc 0.2vmin, #0000 0) 20% 60%,
                radial-gradient(circle, #33ffcc 0.2vmin, #0000 0) 50% 50%;
            background-size: 0.5vmin 0.5vmin;
            background-repeat: no-repeat;
            animation: firework 2s infinite;
        }

        .firework-particle {
            position: absolute;
            width: 0.5vmin;
            height: 0.5vmin;
            border-radius: 50%;
            animation: fireworkParticle 1.5s infinite;
        }

        .black-theme body {
            background-color: #000000;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(139, 0, 0, 0.4) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 51, 51, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(100, 0, 0, 0.5) 0%, transparent 30%);
        }

        .container {
            width: 100%;
            max-width: 500px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            border: 2px solid var(--light-pink);
            transition: all 0.8s ease;
        }

        .black-theme .header {
            background: rgba(30, 10, 10, 0.85);
            border: 2px solid var(--accent-pink);
        }

        .theme-a-prayer .header,
        .theme-white-continue .header {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #ff3333;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            color: var(--accent-pink);
            font-size: 1.8rem;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .header p {
            color: var(--gray-text);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .cards-container {
            position: relative;
            height: 600px;
            perspective: 1000px;
            margin-bottom: 30px;
        }

        .card {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: var(--card-bg);
            border-radius: 24px;
            box-shadow: var(--shadow);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.8s, background-color 0.8s ease, box-shadow 0.8s ease;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            border: 2px solid var(--light-pink);
            overflow: hidden;
            opacity: 0;
            transform: translateX(100%) rotateY(20deg);
        }

        .black-theme .card {
            border: 2px solid var(--accent-pink);
        }

        .theme-a-prayer .card,
        .theme-white-continue .card {
            border: 2px solid #f0f0f0;
        }

        .card.active {
            opacity: 1;
            transform: translateX(0) rotateY(0);
            z-index: 10;
        }

        .card.prev {
            opacity: 0;
            transform: translateX(-100%) rotateY(-20deg);
            z-index: 1;
        }

        .card.next {
            opacity: 0;
            transform: translateX(100%) rotateY(20deg);
            z-index: 1;
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            text-align: center;
            font-size: 1.8rem;
            color: var(--accent-pink);
            margin-bottom: 20px;
            width: 100%;
            padding-bottom: 15px;
            border-bottom: 2px dashed var(--pastel-pink);
        }

        .card-content {
            flex: 1;
            width: 100%;
            padding: 10px 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            overflow-y: auto;
            max-height: calc(100% - 130px);
            margin-bottom: 20px;
        }

        /* Card 18 specific styles to fit content without scrolling */
        #card-18 .card-content {
            max-height: calc(100% - 100px) !important;
            overflow: visible !important;
            padding-top: 10px;
        }

        #card-18 .special-text-container {
            margin: 10px 0 15px 0;
        }

        #card-18 .special-text {
            font-size: 1.5rem;
            padding: 8px 15px;
            margin-bottom: 5px;
        }

        #card-18 .ps-text {
            font-size: 0.9rem;
            margin-bottom: 15px;
            padding: 3px 10px;
        }

        #card-18 .card-gif {
            max-height: 180px;
            margin: 10px 0;
        }

        #card-18 .card-description {
            font-size: 1rem;
            margin: 10px 0;
            padding: 0 5px;
        }

        #card-18 .see-next-container {
            margin-top: 15px;
        }

        #card-18 .see-next-btn {
            padding: 12px 30px;
            font-size: 1.1rem;
        }

        @media (max-width: 600px) {
            #card-18 .card-content {
                max-height: calc(100% - 90px) !important;
            }
            
            #card-18 .special-text {
                font-size: 1.3rem;
                padding: 6px 12px;
            }
            
            #card-18 .card-gif {
                max-height: 140px;
            }
            
            #card-18 .card-description {
                font-size: 0.95rem;
            }
        }

        .card-description {
            text-align: left;
            line-height: 1.6;
            font-size: 1.1rem;
            width: 100%;
            opacity: 0;
            animation: fadeIn 1s forwards;
            animation-delay: 0.3s;
        }

        .card-italic {
            font-style: italic;
            font-family: 'Playfair Display', serif;
            font-weight: 500;
            color: var(--accent-pink);
            font-size: 1.2rem;
            margin: 15px 0;
        }

        .card-gray {
            color: var(--gray-text);
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .card-image {
            max-width: 100%;
            max-height: 250px;
            border-radius: 15px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .card-gif {
            max-width: 100%;
            max-height: 200px;
            border-radius: 15px;
            margin: 15px 0;
        }

        .card-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding-top: 20px;
            border-top: 2px dashed var(--pastel-pink);
            margin-top: auto;
        }

        .nav-btn {
            background-color: var(--light-pink);
            color: var(--accent-pink);
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(255, 105, 180, 0.2);
        }

        .black-theme .nav-btn {
            background-color: #2a0a0a;
            color: var(--accent-pink);
            box-shadow: 0 4px 8px rgba(255, 0, 0, 0.3);
        }

        .theme-a-prayer .nav-btn,
        .theme-white-continue .nav-btn {
            background-color: #f0f0f0;
            color: #ff3333;
            box-shadow: 0 4px 8px rgba(255, 51, 51, 0.2);
        }

        .nav-btn:hover {
            background-color: var(--accent-pink);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 105, 180, 0.3);
        }

        .black-theme .nav-btn:hover {
            box-shadow: 0 6px 12px rgba(255, 0, 0, 0.4);
        }

        .theme-a-prayer .nav-btn:hover,
        .theme-white-continue .nav-btn:hover {
            background-color: #ff3333;
            color: white;
            box-shadow: 0 6px 12px rgba(255, 51, 51, 0.4);
        }

        .nav-btn:active {
            transform: translateY(0);
        }

        .nav-btn i {
            margin-right: 8px;
        }

        .card-start-btn {
            background: linear-gradient(to right, var(--accent-pink), var(--dark-pink));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin: 30px 0;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(255, 105, 180, 0.4);
        }

        .black-theme .card-start-btn {
            box-shadow: 0 6px 15px rgba(255, 0, 0, 0.5);
        }

        .theme-a-prayer .card-start-btn,
        .theme-white-continue .card-start-btn {
            background: linear-gradient(to right, #ff3333, #cc0000);
            box-shadow: 0 6px 15px rgba(255, 51, 51, 0.4);
        }

        .card-start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 105, 180, 0.5);
        }

        .black-theme .card-start-btn:hover {
            box-shadow: 0 10px 20px rgba(255, 0, 0, 0.6);
        }

        .theme-a-prayer .card-start-btn:hover,
        .theme-white-continue .card-start-btn:hover {
            box-shadow: 0 10px 20px rgba(255, 51, 51, 0.6);
        }

        .card-audio-player {
            width: 100%;
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .audio-info {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            width: 100%;
            justify-content: center;
        }

        .audio-info i {
            color: var(--accent-pink);
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .audio-info span {
            font-size: 0.9rem;
            color: var(--gray-text);
        }

        .audio-loading {
            font-size: 0.8rem;
            color: var(--gray-text);
            margin-top: 5px;
            display: none;
        }

        .audio-error {
            font-size: 0.8rem;
            color: #ff3333;
            margin-top: 5px;
            display: none;
        }

        .stars-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 15px 0;
            opacity: 0;
            animation: fadeIn 1s forwards;
            animation-delay: 0.5s;
        }

        .star {
            color: gold;
            font-size: 1.5rem;
            margin: 0 2px;
            animation: starTwinkle 2s infinite;
        }

        .star-spawn {
            position: absolute;
            color: gold;
            font-size: 1.2rem;
            opacity: 0;
            animation: starSpawn 3s linear forwards;
            z-index: 1;
        }

        .rating-item {
            width: 100%;
            margin: 10px 0;
            padding-bottom: 10px;
            border-bottom: 1px dotted var(--pastel-pink);
            position: relative;
        }

        .rating-category {
            font-weight: 600;
            color: var(--accent-pink);
        }

        .rating-stars {
            margin-left: 10px;
        }

        .rating-comment {
            font-size: 0.9rem;
            color: var(--gray-text);
            margin-top: 5px;
            font-style: italic;
        }

        .beauty-stars-container {
            position: relative;
            height: 40px;
            width: 100%;
            margin-top: 5px;
            overflow: hidden;
        }

        .beauty-star {
            position: absolute;
            color: gold;
            font-size: 1.2rem;
            animation: beautyStarFloat 4s linear forwards;
            bottom: 0;
        }

        .quote-text {
            font-weight: bold;
            color: var(--accent-pink);
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            width: 100%;
            position: relative;
            min-height: 60px;
        }

        .choice-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .yes-btn {
            background: linear-gradient(to right, #ff85a2, #ff4d7a);
            color: white;
            position: relative;
            z-index: 101;
        }

        .black-theme .yes-btn {
            background: linear-gradient(to right, #8b0000, #ff3333);
        }

        .theme-a-prayer .yes-btn,
        .theme-white-continue .yes-btn {
            background: linear-gradient(to right, #ff3333, #cc0000);
        }

        .no-btn {
            background: linear-gradient(to right, #cccccc, #aaaaaa);
            color: white;
            position: relative;
            z-index: 101;
        }

        .heart-animation {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        .heart {
            position: absolute;
            bottom: -20px;
            color: var(--accent-pink);
            font-size: 1.5rem;
            opacity: 0;
            animation: heartFloat 3s linear forwards;
        }

        .rose {
            position: absolute;
            bottom: -30px;
            color: #ff3333;
            font-size: 2rem;
            opacity: 0;
            animation: roseFloat 4s linear forwards;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
            opacity: 0;
            animation: fadeIn 2s forwards;
            animation-delay: 0.5s;
        }

        .calendar-week {
            width: 100%;
            height: 50px;
            background: linear-gradient(to bottom right, var(--light-pink), var(--pastel-pink));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--accent-pink);
            border: 2px solid var(--accent-pink);
            font-size: 0.8rem;
            text-align: center;
            padding: 5px;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        .black-theme .calendar-week {
            background: linear-gradient(to bottom right, #2a0a0a, #1a0a0a);
            border: 2px solid var(--accent-pink);
        }

        .theme-a-prayer .calendar-week,
        .theme-white-continue .calendar-week {
            background: linear-gradient(to bottom right, #f0f0f0, #ffffff);
            border: 2px solid #ff3333;
        }

        .calendar-title {
            text-align: center;
            font-weight: 600;
            color: var(--accent-pink);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .card-note {
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--gray-text);
            text-align: center;
            font-style: italic;
        }

        .bottom-text-container {
            margin-top: 30px;
            text-align: center;
            opacity: 0;
            animation: fadeIn 1.5s forwards;
            animation-delay: 1s;
            width: 100%;
        }

        .bottom-word {
            font-size: 2.5rem;
            color: var(--accent-pink);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-top: 10px;
            font-family: 'Playfair Display', serif;
        }

        .see-next-container {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-top: 20px;
        }

        .see-next-btn {
            background: linear-gradient(to right, var(--accent-pink), var(--dark-pink));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(255, 105, 180, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .black-theme .see-next-btn {
            box-shadow: 0 6px 15px rgba(255, 0, 0, 0.5);
        }

        .theme-a-prayer .see-next-btn,
        .theme-white-continue .see-next-btn {
            background: linear-gradient(to right, #ff3333, #cc0000);
            box-shadow: 0 6px 15px rgba(255, 51, 51, 0.4);
        }

        .see-next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 105, 180, 0.5);
        }

        .black-theme .see-next-btn:hover {
            box-shadow: 0 10px 20px rgba(255, 0, 0, 0.6);
        }

        .theme-a-prayer .see-next-btn:hover,
        .theme-white-continue .see-next-btn:hover {
            box-shadow: 0 10px 20px rgba(255, 51, 51, 0.6);
        }

        .see-next-btn i {
            margin-right: 10px;
        }

        .bold-center {
            font-weight: bold;
            text-align: center;
            width: 100%;
        }

        .lyrics-text {
            font-weight: bold;
            text-align: center;
            font-style: italic;
            font-size: 1.3rem;
            color: var(--accent-pink);
            margin: 20px 0;
            line-height: 1.6;
            font-family: 'Playfair Display', serif;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes starTwinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.9); }
        }

        @keyframes starSpawn {
            0% { opacity: 0; transform: translateY(0) scale(0); }
            10% { opacity: 1; transform: translateY(-10px) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1); }
        }

        @keyframes beautyStarFloat {
            0% { 
                opacity: 0; 
                transform: translateY(0) scale(0) rotate(0deg); 
            }
            10% { 
                opacity: 1; 
                transform: translateY(-10px) scale(1) rotate(10deg); 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-100px) scale(1) rotate(360deg); 
            }
        }

        @keyframes heartFloat {
            0% { opacity: 0; transform: translateY(0) scale(0); }
            10% { opacity: 1; transform: translateY(-10px) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1); }
        }

        @keyframes roseFloat {
            0% { opacity: 0; transform: translateY(0) rotate(0deg) scale(0); }
            10% { opacity: 1; transform: translateY(-10px) rotate(10deg) scale(1); }
            100% { opacity: 0; transform: translateY(-120px) rotate(30deg) scale(1); }
        }

        @media (max-width: 600px) {
            .card {
                padding: 20px;
            }
            
            .card-title {
                font-size: 1.5rem;
            }
            
            .card-description {
                font-size: 1rem;
            }
            
            .nav-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .card-start-btn {
                padding: 12px 30px;
                font-size: 1.1rem;
            }
            
            .choice-btn {
                padding: 12px 30px;
                font-size: 1.1rem;
            }
            
            .cards-container {
                height: 650px;
            }
            
            .card-content {
                max-height: calc(100% - 120px);
            }
            
            .choice-buttons {
                min-height: 50px;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .calendar-week {
                height: 45px;
                font-size: 0.7rem;
            }
            
            .bottom-word {
                font-size: 2rem;
            }
            
            .see-next-btn {
                padding: 12px 30px;
                font-size: 1.1rem;
            }
            
            .lyrics-text {
                font-size: 1.1rem;
            }
            
            .special-text {
                font-size: 1.5rem;
                padding: 8px 15px;
            }
        }

        /* Spotify Wrapped style decorations */
        .spotify-decoration {
            position: fixed;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            z-index: -1;
            transition: background 0.8s ease;
        }

        .decoration-1 {
            top: 10%;
            left: 5%;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(255, 214, 231, 0.7) 0%, transparent 70%);
        }

        .decoration-2 {
            bottom: 15%;
            right: 8%;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, rgba(255, 133, 162, 0.5) 0%, transparent 70%);
        }

        .decoration-3 {
            top: 40%;
            left: 80%;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(255, 214, 231, 0.6) 0%, transparent 70%);
        }

        .black-theme .decoration-1 {
            background: radial-gradient(circle, rgba(139, 0, 0, 0.3) 0%, transparent 70%);
        }

        .black-theme .decoration-2 {
            background: radial-gradient(circle, rgba(255, 51, 51, 0.2) 0%, transparent 70%);
        }

        .black-theme .decoration-3 {
            background: radial-gradient(circle, rgba(139, 0, 0, 0.4) 0%, transparent 70%);
        }

        .theme-a-prayer .decoration-1,
        .theme-white-continue .decoration-1 {
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
        }

        .theme-a-prayer .decoration-2,
        .theme-white-continue .decoration-2 {
            background: radial-gradient(circle, rgba(240, 240, 240, 0.6) 0%, transparent 70%);
        }

        .theme-a-prayer .decoration-3,
        .theme-white-continue .decoration-3 {
            background: radial-gradient(circle, rgba(255, 255, 255, 0.7) 0%, transparent 70%);
        }
        
        /* Scrollbar styling */
        .card-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .card-content::-webkit-scrollbar-track {
            background: rgba(255, 214, 231, 0.3);
            border-radius: 10px;
        }
        
        .card-content::-webkit-scrollbar-thumb {
            background: var(--accent-pink);
            border-radius: 10px;
        }
        
        .card-content::-webkit-scrollbar-thumb:hover {
            background: var(--dark-pink);
        }

        .black-theme .card-content::-webkit-scrollbar-track {
            background: rgba(139, 0, 0, 0.2);
        }
        
        .black-theme .card-content::-webkit-scrollbar-thumb {
            background: var(--accent-pink);
        }
        
        .black-theme .card-content::-webkit-scrollbar-thumb:hover {
            background: #ff6666;
        }

        .theme-a-prayer .card-content::-webkit-scrollbar-track,
        .theme-white-continue .card-content::-webkit-scrollbar-track {
            background: rgba(240, 240, 240, 0.5);
        }
        
        .theme-a-prayer .card-content::-webkit-scrollbar-thumb,
        .theme-white-continue .card-content::-webkit-scrollbar-thumb {
            background: #ff3333;
        }
        
        .theme-a-prayer .card-content::-webkit-scrollbar-thumb:hover,
        .theme-white-continue .card-content::-webkit-scrollbar-thumb:hover {
            background: #cc0000;
        }
        
        /* Envelope Styles for Card 26 */
        .envelope-container-final {
            position: relative;
            width: 280px;
            height: 190px;
            margin: 25px auto;
            perspective: 1000px;
        }
        
        .envelope-final {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            cursor: pointer;
        }
        
        .envelope-back-final {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #e91e63;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1;
            overflow: hidden;
        }
        
        .heart-pattern-final {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.2;
            background-image: 
                radial-gradient(circle at 20% 30%, #ff4081 3px, transparent 4px),
                radial-gradient(circle at 80% 40%, #ff4081 3px, transparent 4px),
                radial-gradient(circle at 40% 70%, #ff4081 3px, transparent 4px),
                radial-gradient(circle at 60% 20%, #ff4081 3px, transparent 4px);
            background-size: 50px 50px;
        }
        
        .envelope-front-final {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #f06292;
            border-radius: 8px;
            transform-origin: bottom;
            transition: transform 1s 0.3s;
            z-index: 3;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%);
        }
        
        .envelope-flap-final {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 140px solid transparent;
            border-right: 140px solid transparent;
            border-top: 95px solid #ec407a;
            top: 0;
            left: 0;
            transform-origin: top;
            transition: transform 1s 0.1s;
            z-index: 4;
            filter: drop-shadow(0 -3px 5px rgba(0, 0, 0, 0.2));
        }
        
        .letter-final {
            position: absolute;
            width: 90%;
            height: 85%;
            background: linear-gradient(to bottom, #fff5f7, #ffeef2);
            border-radius: 5px;
            left: 5%;
            top: 8%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
            transform: translateY(0);
            transition: transform 1s 0.6s, box-shadow 0.5s, z-index 0s 0.6s;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .letter-final::before {
            content: "";
            position: absolute;
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
            background: #ffcdd2;
            clip-path: polygon(50% 15%, 80% 10%, 100% 35%, 50% 85%, 0 35%, 20% 10%);
            opacity: 0.5;
        }
        
        .letter-content-final {
            padding: 15px;
            text-align: center;
        }
        
        .secret-word-final {
            font-size: 3.8rem;
            font-weight: 900;
            background: linear-gradient(45deg, #d81b60, #880e4f);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 4px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            transform: scale(0.8);
            opacity: 0;
            transition: transform 0.8s 1.2s, opacity 0.8s 1.2s;
            font-family: 'Courier New', Courier, monospace;
        }
        
        .letter-lines-final {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 20px,
                #f8bbd0 21px
            );
            opacity: 0.3;
            z-index: -1;
        }
        
        .envelope-final.open .envelope-flap-final {
            transform: rotateX(180deg);
        }
        
        .envelope-final.open .envelope-front-final {
            transform: rotateX(-180deg);
        }
        
        .envelope-final.open .letter-final {
            transform: translateY(0);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            z-index: 5;
        }
        
        .envelope-final.open .secret-word-final {
            transform: scale(1);
            opacity: 1;
        }
        
        .flap-heart-final {
            position: absolute;
            top: -65px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffebee;
            font-size: 2.2rem;
            z-index: 5;
            transition: transform 0.8s 0.1s;
        }
        
        .envelope-final.open .flap-heart-final {
            transform: translateX(-50%) rotateY(720deg) scale(1.2);
        }
        
        .reveal-btn-final {
            margin: 20px auto;
            padding: 14px 35px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            background: linear-gradient(to right, #d81b60, #880e4f);
            color: white;
            font-weight: 700;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(136, 14, 79, 0.4);
        }
        
        .black-theme .reveal-btn-final {
            background: linear-gradient(to right, #8b0000, #ff3333);
            box-shadow: 0 8px 20px rgba(255, 0, 0, 0.4);
        }
        
        .theme-a-prayer .reveal-btn-final,
        .theme-white-continue .reveal-btn-final {
            background: linear-gradient(to right, #ff3333, #cc0000);
            box-shadow: 0 8px 20px rgba(255, 51, 51, 0.4);
        }
        
        .reveal-btn-final:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(136, 14, 79, 0.5);
        }
        
        .black-theme .reveal-btn-final:hover {
            box-shadow: 0 12px 25px rgba(255, 0, 0, 0.5);
        }
        
        .theme-a-prayer .reveal-btn-final:hover,
        .theme-white-continue .reveal-btn-final:hover {
            box-shadow: 0 12px 25px rgba(255, 51, 51, 0.5);
        }
        
        .reveal-btn-final:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            background: linear-gradient(to right, #999, #777);
        }
        
        @keyframes wordGlowFinal {
            0% { text-shadow: 0 0 10px rgba(216, 27, 96, 0.5); }
            50% { text-shadow: 0 0 25px rgba(216, 27, 96, 0.8); }
            100% { text-shadow: 0 0 10px rgba(216, 27, 96, 0.5); }
        }
        
        .envelope-final.open .secret-word-final {
            animation: wordGlowFinal 2s infinite 1.5s;
        }
        
        @keyframes revealPulseFinal {
            0% { box-shadow: 0 0 0 0 rgba(216, 27, 96, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(216, 27, 96, 0); }
            100% { box-shadow: 0 0 0 0 rgba(216, 27, 96, 0); }
        }
        
        .reveal-effect-final {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 5px;
            animation: revealPulseFinal 1.5s;
            pointer-events: none;
        }
        
        @media (max-width: 600px) {
            .envelope-container-final {
                width: 240px;
                height: 160px;
                margin: 20px auto;
            }
            
            .envelope-flap-final {
                border-left: 120px solid transparent;
                border-right: 120px solid transparent;
                border-top: 80px solid #ec407a;
            }
            
            .secret-word-final {
                font-size: 2.8rem;
            }
            
            .flap-heart-final {
                top: -55px;
                font-size: 1.8rem;
            }
            
            .reveal-btn-final {
                padding: 12px 25px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="dynamic-background"></div>
    <div class="spotify-decoration decoration-1"></div>
    <div class="spotify-decoration decoration-2"></div>
    <div class="spotify-decoration decoration-3"></div>
    
    <div class="container">
        <div class="header">
            <h1>For Jace ❤️</h1>
            <p></p>
        </div>
        
        <div class="cards-container">
            <!-- Cards will be dynamically inserted here -->
        </div>
        
        <!-- Moved navigation buttons outside the cards container -->
        <div class="card-buttons">
            <button class="nav-btn prev-btn" id="prevBtn">
                <i class="fas fa-arrow-left"></i> Previous
            </button>
            <button class="nav-btn replay-btn" id="replayBtn">
                <i class="fas fa-redo"></i> Replay
            </button>
            <button class="nav-btn next-btn" id="nextBtn">
                Next <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <script>
        // Card data with all content and instructions - TEXT UPDATES ONLY
        const cards = [
            {
                id: 1,
                title: "",
                description: "Hi Jace, if you're seeing this it means were already a week strong of not hearing each other's voices or seeing each other's faces. No one to call when you get back home tired from school or for me being half asleep late at night and wait for you to arrive home HAHAHAHA.",
                hasStartButton: true
            },
            {
                id: 2,
                title: "",
                description: "This is a love message from me to you, Spotify wrapped style!",
                italicText: "This is a love message from me to you, Spotify wrapped style!",
                grayText: "This message contains audio, please allow any permissions asked.",
                hasAudio: false
            },
            {
                id: 3,
                title: "",
                description: "The process by which we became acquainted was unexpected. But I couldn't be more grateful to have come across you and talked to you that day.",
                italicText: "The process by which we became acquainted was unexpected. But I couldn't be more grateful to have come across you and talked to you that day."
            },
            {
                id: 4,
                title: "Evelyn Hugo said, People think that intimacy is about sex. But intimacy is about truth. When you realize you can tell someone your truth, when you can show yourself to them, when you stand in front of them bare and their response is - 'You're safe with me'",
                description: "I'm not sure what love is cause my mind has fooled me before, but if this is what i think it is then, i'm in love with you and I believe in us",
                italicText: "I'm not sure what love is cause my mind has fooled me before, but if this is what i think it is then, i'm in love with you and I believe in us"
            },
            {
                id: 5,
                title: "How would I rate you?",
                description: "",
                ratings: [
                    {category: "Beauty", stars: "infinite", comment: "(everybody wants to steal my girl)"},
                    {category: "Intelligence", stars: 8, comment: "(very smart)"},
                    {category: "Personality", stars: 8, comment: "(very warming)"},
                    {category: "Texting", stars: 3, comment: "(can be improved)"},
                    {category: "Stubborn", stars: 6, comment: "(gets on my nerves sometimes)"},
                    {category: "Durability", stars: 8, comment: "(massive respect for this strong gal)"}
                ]
            },
            {
                id: 6,
                title: "Let it be known,",
                description: "I mean every single word I say, and every gesture I show comes from a place of honesty. Nothing was forced, nothing was said lightly. I genuinely enjoyed our time together, the conversations, the quiet moments, and everything in between. Those moments mattered to me more than I probably ever said out loud, and I carry them with me with nothing but sincerity."
            },
            {
                id: 7,
                title: "To my hardworking girl",
                description: "—I see every quiet effort, even the ones you think disappear unnoticed. I'm proud of the strength you carry, proud that you've come this far. With every achievement, pause and claim the moment as your own, stand tall, be proud. You deserve every bit of the light you've earned. Keep going, Maganda ko. I'll always be here, cheering for you, every step of the way. I got you."
            },
            {
                id: 8,
                title: "",
                description: "Fun fact about me: music is where I'm most expressive, in case you haven't noticed.",
                italicText: "Fun fact about me: music is where I'm most expressive, in case you haven't noticed."
            },
            {
                id: 9,
                title: "True colors",
                description: "As I know that \"This world makes you crazy\" And you've taken all you can bear. But I'm here for you, so \"Just call me up 'Cause I will always be there\" \n\nAnd I thank you for showing me \"your true colors,\" and \"that's why I love you\" \n\nSo \"don't be afraid to let them show, Your true colors\" because they \"...are beautiful\"",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/truecolors.mp3",
                hasQuotes: true,
                theme: "theme-true-colors"
            },
            {
                id: 10,
                title: "This town",
                description: "If you still think you're not perfect, just know that, \"if the whole world was watching I'd still dance with you\" \n\nDistance? \"Drive highways and byways to be there with you\" \n\nBut I know I'm not perfect too, and so, \"Everything comes back to you\"",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/thistown.mp3",
                hasQuotes: true,
                theme: "theme-this-town"
            },
            {
                id: 11,
                title: "Naiilang",
                description: "\"Tumingin ka sa akin, gusto kong linawin\" \n\nJust know that \"Sinasabi ko nga na atin ang mundo\", and I choose you kasi \"Walang ibang tulad mo\"",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/naiilang.mp3",
                hasQuotes: true,
                theme: "theme-naiilang"
            },
            {
                id: 12,
                title: "",
                description: "And ohh, I love LANY; something about their songs just speaks to me.",
                italicText: "And ohh, I love LANY; something about their songs just speaks to me."
            },
            {
                id: 13,
                title: "Cowboy in LA",
                description: "One thing about me is that, for you, \"I'll hold your hand, I'll hold the door, Cause that's how I was raised\" \n\n\"And all the other boys in town all look and talk the same\" You don't have to worry about me because, \"I got a different kind of heart\"",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/cowboyinla.mp3",
                hasQuotes: true,
                theme: "theme-cowboy-in-la"
            },
            {
                id: 14,
                title: "Anything 4 u",
                description: "How much do I love you? Well, \"I'll catch a flight, go to the moon, Lay on the floor of your living room\" \n\nI'll be your safe space and we can \"talk about the things that make you cry\" \n\nIf you asked me too, \"I'll never walk into another bar, I'll burn these tattoos off my arms\" \n\nAnd when I love someone, \"I'll go to hell and back if I have to\" \"I'll do anything for you\" \n\n—Let me be a living proof that chivalry is not dead",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/anything4u.mp3",
                hasQuotes: true,
                theme: "theme-anything-4-u"
            },
            {
                id: 15,
                title: "A couple minutes",
                description: "If you ever make a mistake \"Of course, I still care, Love's never wasted, When it's shared..\" \n\nWe had our time together, it was beautiful, \"And although it's over, I'll always be there\" But now I guess for awhile \"we're going back to real life\"",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/Acoupleminutes.mp3",
                hasQuotes: true,
                theme: "theme-a-couple-minutes"
            },
            {
                id: 16,
                title: "Godspeed",
                description: "\"I will always love you, Let go of a prayer for you\" - I pray about you every night, I pray that you are always protected no matter the circumstances and that you bear strength to achieve your goals- \n\n\"Just a sweet word, The table is prepared for you\" because if I prayed to ask for you, its selfish, all that is in god's hands, nonetheless, this is how I love you.",
                audioUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/godspeed.mp3",
                hasQuotes: true,
                theme: "theme-godspeed"
            },
            {
                id: 17,
                title: "",
                description: "Im sorry I couldn't be there with you in this very special day. But,",
                imageUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/photo_2026-02-01_16-42-09.jpg",
                hasChoiceButtons: true
            },
            {
                id: 18,
                title: "",
                specialText: "You officially have a Valentine's!",
                psText: "P.S: its illegal to have 2 valentine's",
                description: "I love you and I miss you so much babyyyyyyyyyyyyy",
                gifUrl: "https://raw.githubusercontent.com/JUP1T3RZ/aces/4e65a406e6e232940950ee6b89056c31f807459e/kiss.gif",
                hasSeeNextButton: true
            },
            {
                id: 19,
                title: "The weekly project",
                description: "The Weekly Project is something I'm doing for us across the distance. Every Friday, I send you a fact, sometimes a story, sometimes a small truth. Each piece stands on its own, and every month carries its own unique topic, but together they build into something bigger over time."
            },
            {
                id: 20,
                title: "",
                description: "There's no rushing this. You come back every Friday for the next part, collecting the words like pieces of a puzzle. By the end of the 12th week, you'll have everything you need to piece it together and unlock the prize. That rhythm is part of what makes it special. Fridays become our moment, something steady to look forward to, even when we're far apart."
            },
            {
                id: 21,
                title: "",
                description: "This isn't about constant messages or filling the silence. It's about intention. About giving you something thoughtful, consistently, and letting time and anticipation do their work.",
                hasCalendar: true,
                hasWeekButton: true
            },
            {
                id: 22,
                title: "",
                description: "The facts I share here aren't always sweet. Some are uncomfortable, harsh truths. But I believe true love is built on truth, not on beautiful lies, and this project is grounded in that belief."
            },
            {
                id: 23,
                title: "",
                description: "This month's topic: A Prayer",
                audioUrl: "https://github.com/JUP1T3RZ/aces/blob/45b0575eae9887cf6a448160ddb5baea47542ea8/The%201975%20-%20About%20You%20(Official).mp3",
                hasContinuousAudio: true,
                theme: "theme-a-prayer"
            },
            {
                id: 24,
                title: "Week 1: About You",
                description: "I don't pray to keep you. I pray for you. I pray that you become everything God is calling you to be, that your dreams unfold with courage, and that your heart finds peace; even if that path doesn't include me.",
                theme: "theme-white-continue"
            },
            {
                id: 25,
                title: "",
                description: "Because real love doesn't cling or claim; it intercedes, it blesses, it lets go. God brings people into our lives not always to stay, but because, for a moment, someone needed someone else's prayers.",
                isLyrics: true,
                theme: "theme-white-continue"
            },
            {
                id: 26,
                title: "",
                description: "And still, I hold this hope gently— that if God wills it, I may walk beside you a little longer.",
                hasEnvelopeReveal: true,
                theme: "theme-white-continue"
            }
        ];

        // Current card index
        let currentCardIndex = 0;
        let noButtonClickCount = 0;
        let audioElements = {};
        let beautyStarsInterval;
        let continuousAudioPlaying = null;
        let fireworkInterval = null;
        let previousTheme = '';

        // Initialize the cards
        function initCards() {
            const cardsContainer = document.querySelector('.cards-container');
            
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${index === 0 ? 'active' : ''}`;
                cardElement.id = `card-${card.id}`;
                cardElement.innerHTML = generateCardHTML(card);
                cardsContainer.appendChild(cardElement);
                
                // Initialize stars for card 5
                if (card.id === 5) {
                    setTimeout(() => {
                        initStarsAnimation();
                        initBeautyStars();
                    }, 500);
                }
                
                // Initialize audio for cards 9-16
                if (card.id >= 9 && card.id <= 16 && card.audioUrl) {
                    setTimeout(() => {
                        initAudioForCard(card.id, card.audioUrl, false);
                    }, 300);
                }
                
                // Initialize audio for card 23 (continuous)
                if (card.id === 23 && card.audioUrl) {
                    setTimeout(() => {
                        initAudioForCard(card.id, card.audioUrl, true);
                    }, 300);
                }
                
                // Initialize envelope for card 26
                if (card.id === 26 && card.hasEnvelopeReveal) {
                    setTimeout(() => {
                        initEnvelopeForCard();
                    }, 300);
                }
            });
            
            // Initialize event listeners
            initEventListeners();
        }

        // Generate HTML for each card - UPDATED to handle line breaks
        function generateCardHTML(card) {
            let html = '';
            
            if (card.title) {
                html += `<div class="card-title">${card.title}</div>`;
            }
            
            html += '<div class="card-content">';
            
            // Card 1 has a start button
            if (card.id === 1 && card.hasStartButton) {
                html += `<button class="card-start-btn" id="startBtn">Start</button>`;
                html += `<div class="card-description" style="display: none;">${formatTextWithLineBreaks(card.description)}</div>`;
            } 
            // Cards with italic text
            else if (card.italicText) {
                html += `<div class="card-italic">${card.italicText}</div>`;
                
                if (card.grayText) {
                    html += `<div class="card-gray">${card.grayText}</div>`;
                }
                
                if (card.description && card.id !== 2 && card.id !== 3 && card.id !== 4 && card.id !== 8 && card.id !== 12) {
                    html += `<div class="card-description">${formatTextWithLineBreaks(processQuotes(card.description, card.hasQuotes))}</div>`;
                }
            }
            // Card with ratings
            else if (card.ratings) {
                html += '<div class="stars-container" id="starsContainer"></div>';
                html += '<div class="card-description" style="width: 100%;">';
                
                card.ratings.forEach(rating => {
                    html += `<div class="rating-item">`;
                    html += `<span class="rating-category">${rating.category}:</span>`;
                    
                    if (rating.stars === "infinite") {
                        html += `<span class="rating-stars">Infinite Stars</span>`;
                        html += `<div class="beauty-stars-container" id="beautyStarsContainer"></div>`;
                    } else {
                        html += `<span class="rating-stars">${'★'.repeat(rating.stars)} (${rating.stars} stars)</span>`;
                    }
                    
                    html += `<div class="rating-comment">${rating.comment}</div>`;
                    html += `</div>`;
                });
                
                html += '</div>';
            }
            // Card with image and choice buttons
            else if (card.imageUrl) {
                html += `<div class="card-description">${formatTextWithLineBreaks(card.description)}</div>`;
                html += `<img src="${card.imageUrl}" alt="Special" class="card-image" onerror="this.style.display='none'">`;
                
                if (card.hasChoiceButtons) {
                    html += '<div class="choice-buttons">';
                    html += '<button class="choice-btn yes-btn" id="yesBtn">YES</button>';
                    html += '<button class="choice-btn no-btn" id="noBtn">NO</button>';
                    html += '</div>';
                    html += '<div class="heart-animation" id="heartAnimation"></div>';
                }
            }
            // Card with GIF and See Next button (updated for card 18)
            else if (card.hasSeeNextButton) {
                // Add firework container
                html += '<div class="firework-container" id="fireworkContainer"></div>';
                
                // Special text and PS text for card 18
                if (card.specialText) {
                    html += '<div class="special-text-container">';
                    html += `<div class="special-text">${card.specialText}</div>`;
                    if (card.psText) {
                        html += `<div class="ps-text">${card.psText}</div>`;
                    }
                    html += '</div>';
                }
                
                // GIF
                if (card.gifUrl) {
                    html += `<img src="${card.gifUrl}" alt="Kiss" class="card-gif" onerror="this.style.display='none'">`;
                }
                
                // Description text
                if (card.description) {
                    html += `<div class="card-description" style="text-align: center; margin-top: 20px;">${formatTextWithLineBreaks(card.description)}</div>`;
                }
                
                html += '<div class="see-next-container">';
                html += '<button class="see-next-btn" id="seeNextBtn">';
                html += '<i class="fas fa-arrow-right"></i> See Next';
                html += '</button>';
                html += '</div>';
            }
            // Card with calendar
            else if (card.hasCalendar) {
                html += `<div class="card-description">${formatTextWithLineBreaks(card.description)}</div>`;
                html += '<div class="calendar-container">';
                html += '<div class="calendar-title">12 Weeks Calendar</div>';
                html += '<div class="calendar-grid" id="calendarGrid">';
                
                for (let i = 1; i <= 12; i++) {
                    html += `<div class="calendar-week" style="animation-delay: ${0.5 + (i * 0.1)}s;">`;
                    html += `Week ${i}`;
                    html += '</div>';
                }
                
                html += '</div>';
                html += '</div>';
                
                if (card.hasWeekButton) {
                    html += '<div class="see-next-container">';
                    html += '<button class="see-next-btn" id="weekBtn">';
                    html += '<i class="fas fa-calendar-week"></i> Week 1';
                    html += '</button>';
                    html += '</div>';
                }
            }
            // Card with continuous audio (card 23)
            else if (card.id === 23) {
                html += `<div class="card-description" style="font-weight: bold; text-align: center; font-size: 1.3rem;">${formatTextWithLineBreaks(card.description)}</div>`;
                html += `<div class="card-audio-player">`;
                html += `<div class="audio-info"><i class="fas fa-music"></i> <span>Now playing: About You - The 1975</span></div>`;
                html += `<div class="audio-loading" id="audio-loading-${card.id}">Loading audio...</div>`;
                html += `<div class="audio-error" id="audio-error-${card.id}">Audio not available</div>`;
                html += `<audio id="audio-${card.id}" preload="auto" style="display: none;"></audio>`;
                html += `</div>`;
            }
            // Card with lyrics (card 25)
            else if (card.isLyrics) {
                html += `<div class="lyrics-text">${formatTextWithLineBreaks(card.description)}</div>`;
            }
            // Card with envelope reveal (card 26)
            else if (card.hasEnvelopeReveal) {
                html += `<div class="card-description">${formatTextWithLineBreaks(card.description)}</div>`;
                html += '<div class="bottom-text-container">';
                html += `<div class="card-italic" style="font-size: 1.3rem; margin-bottom: 10px;">This week's word:</div>`;
                
                // Envelope reveal section
                html += `
                <div class="envelope-container-final">
                    <div class="envelope-final" id="envelope-final">
                        <div class="envelope-back-final">
                            <div class="heart-pattern-final"></div>
                        </div>
                        
                        <div class="letter-final">
                            <div class="letter-lines-final"></div>
                            <div class="letter-content-final">
                                <div class="secret-word-final" id="secret-word-final">MANY</div>
                            </div>
                        </div>
                        
                        <div class="envelope-front-final"></div>
                        
                        <div class="envelope-flap-final">
                            <div class="flap-heart-final"><i class="fas fa-heart"></i></div>
                        </div>
                    </div>
                </div>
                
                <button class="reveal-btn-final" id="reveal-btn-final">
                    <i class="fas fa-heart"></i> Reveal Word
                </button>
                `;
                
                html += '</div>';
            }
            // Regular card
            else {
                html += `<div class="card-description">${formatTextWithLineBreaks(processQuotes(card.description, card.hasQuotes))}</div>`;
            }
            
            // Audio player for cards with audio (not continuous)
            if (card.audioUrl && card.id !== 23) {
                html += `<div class="card-audio-player">`;
                html += `<div class="audio-info"><i class="fas fa-music"></i> <span>Now playing: ${card.title}</span></div>`;
                html += `<div class="audio-loading" id="audio-loading-${card.id}">Loading audio...</div>`;
                html += `<div class="audio-error" id="audio-error-${card.id}">Audio not available</div>`;
                html += `<audio id="audio-${card.id}" preload="auto" style="display: none;"></audio>`;
                html += `</div>`;
            }
            
            html += '</div>';
            
            return html;
        }

        // Process quotes for cards 9-16
        function processQuotes(text, hasQuotes) {
            if (!hasQuotes) return text;
            
            // Replace quotes with span elements for styling
            return text.replace(/"([^"]+)"/g, '<span class="quote-text">"$1"</span>');
        }

        // Format text to preserve line breaks
        function formatTextWithLineBreaks(text) {
            if (!text) return '';
            // Replace \n\n with paragraph breaks and \n with line breaks
            return text
                .replace(/\n\n/g, '</p><p>')
                .replace(/\n/g, '<br>')
                .replace(/<p>(.*?)<\/p>/g, (match, content) => {
                    return `<p style="margin-bottom: 15px;">${content}</p>`;
                })
                .replace(/^(.*?)$/m, '<p>$1</p>'); // Wrap first line if no paragraphs yet
        }

        // Initialize envelope for card 26
        function initEnvelopeForCard() {
            const envelope = document.getElementById('envelope-final');
            const revealBtn = document.getElementById('reveal-btn-final');
            const secretWord = document.getElementById('secret-word-final');
            
            let isOpen = false;
            
            // Open envelope function
            revealBtn.addEventListener('click', function() {
                if (isOpen) return;
                
                // Add the 'open' class to trigger the animation
                envelope.classList.add('open');
                isOpen = true;
                
                // Update button
                revealBtn.innerHTML = '<i class="fas fa-check"></i> Revealed!';
                revealBtn.disabled = true;
                
                // Add a reveal effect to the letter
                const revealEffect = document.createElement('div');
                revealEffect.className = 'reveal-effect-final';
                document.querySelector('.letter-final').appendChild(revealEffect);
                
                // Remove effect after animation completes
                setTimeout(() => {
                    revealEffect.remove();
                }, 1500);
                
                // Add a subtle bounce to the envelope when opening
                envelope.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    envelope.style.transform = 'scale(1)';
                }, 200);
            });
            
            // Optional: Click on the envelope to open it too
            envelope.addEventListener('click', function() {
                if (!isOpen) {
                    revealBtn.click();
                }
            });
            
            // Add a subtle hover effect to the envelope before opening
            envelope.addEventListener('mouseenter', function() {
                if (!isOpen) {
                    envelope.style.transform = 'scale(1.02)';
                }
            });
            
            envelope.addEventListener('mouseleave', function() {
                if (!isOpen) {
                    envelope.style.transform = '';
                }
            });
            
            // Add a subtle heartbeat effect to the flap heart before opening
            const flapHeart = document.querySelector('.flap-heart-final');
            setInterval(() => {
                if (!isOpen) {
                    flapHeart.style.transform = 'translateX(-50%) scale(1.1)';
                    setTimeout(() => {
                        if (!isOpen) {
                            flapHeart.style.transform = 'translateX(-50%) scale(1)';
                        }
                    }, 300);
                }
            }, 2000);
        }

        // Initialize stars animation for card 5
        function initStarsAnimation() {
            const starsContainer = document.querySelector('#starsContainer');
            if (!starsContainer) return;
            
            // Create initial stars
            for (let i = 0; i < 15; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.innerHTML = '★';
                star.style.animationDelay = `${i * 0.1}s`;
                starsContainer.appendChild(star);
            }
            
            // Create background stars spawning
            function spawnStar() {
                const star = document.createElement('div');
                star.className = 'star-spawn';
                star.innerHTML = '★';
                
                // Random position at bottom
                const leftPos = Math.random() * 100;
                star.style.left = `${leftPos}%`;
                
                // Random size
                const size = 0.8 + Math.random() * 0.8;
                star.style.fontSize = `${size}rem`;
                
                // Random animation duration
                const duration = 2 + Math.random() * 2;
                star.style.animationDuration = `${duration}s`;
                
                document.getElementById('card-5').appendChild(star);
                
                // Remove star after animation
                setTimeout(() => {
                    if (star.parentNode) {
                        star.parentNode.removeChild(star);
                    }
                }, duration * 1000);
            }
            
            // Spawn stars periodically
            setInterval(spawnStar, 300);
        }

        // Initialize infinite stars for beauty rating
        function initBeautyStars() {
            const beautyContainer = document.getElementById('beautyStarsContainer');
            if (!beautyContainer) return;
            
            // Clear any existing interval
            if (beautyStarsInterval) {
                clearInterval(beautyStarsInterval);
            }
            
            // Create stars continuously
            beautyStarsInterval = setInterval(() => {
                createBeautyStar();
            }, 200);
            
            // Create initial burst of stars
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    createBeautyStar();
                }, i * 100);
            }
        }
        
        // Create a single beauty star
        function createBeautyStar() {
            const beautyContainer = document.getElementById('beautyStarsContainer');
            if (!beautyContainer) return;
            
            const star = document.createElement('div');
            star.className = 'beauty-star';
            star.innerHTML = '★';
            
            // Random horizontal position within container
            const leftPos = Math.random() * 100;
            star.style.left = `${leftPos}%`;
            
            // Random size
            const size = 0.8 + Math.random() * 1.2;
            star.style.fontSize = `${size}rem`;
            
            // Random animation duration
            const duration = 3 + Math.random() * 2;
            star.style.animationDuration = `${duration}s`;
            
            beautyContainer.appendChild(star);
            
            // Remove star after animation
            setTimeout(() => {
                if (star.parentNode) {
                    star.parentNode.removeChild(star);
                }
            }, duration * 1000);
        }

        // Initialize audio for cards
        function initAudioForCard(cardId, audioUrl, isContinuous = false) {
            const audioElement = document.getElementById(`audio-${cardId}`);
            const loadingElement = document.getElementById(`audio-loading-${cardId}`);
            const errorElement = document.getElementById(`audio-error-${cardId}`);
            
            if (!audioElement) return;
            
            audioElements[cardId] = audioElement;
            
            // Set up audio loading
            function loadAudio() {
                if (loadingElement) loadingElement.style.display = 'block';
                if (errorElement) errorElement.style.display = 'none';
                
                console.log(`Loading audio for card ${cardId}: ${audioUrl}`);
                
                // Convert GitHub blob URL to raw URL
                let rawAudioUrl = audioUrl;
                if (audioUrl.includes('github.com') && audioUrl.includes('/blob/')) {
                    rawAudioUrl = audioUrl.replace('github.com', 'raw.githubusercontent.com').replace('/blob/', '/');
                }
                
                // Set audio source
                audioElement.src = rawAudioUrl;
                
                // Set up event listeners
                audioElement.addEventListener('canplay', function() {
                    if (loadingElement) loadingElement.style.display = 'none';
                    console.log(`Audio loaded for card ${cardId}`);
                });
                
                audioElement.addEventListener('error', function(e) {
                    if (loadingElement) loadingElement.style.display = 'none';
                    if (errorElement) {
                        errorElement.textContent = "Audio loading failed. Click to try again";
                        errorElement.style.display = 'block';
                        errorElement.style.cursor = 'pointer';
                        errorElement.onclick = () => {
                            errorElement.style.display = 'none';
                            loadAudio();
                        };
                    }
                    console.log(`Audio failed to load for card ${cardId}:`, e);
                    
                    // Fallback: Try the original URL if raw URL fails
                    if (audioUrl !== rawAudioUrl) {
                        console.log('Trying original URL as fallback...');
                        audioElement.src = audioUrl;
                    }
                });
                
                // Set up observer to play when card is displayed
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            const card = document.getElementById(`card-${cardId}`);
                            if (card.classList.contains('active')) {
                                setTimeout(() => {
                                    playAudioForCard(cardId, isContinuous);
                                }, 800);
                            } else if (!isContinuous) {
                                // Only pause if not continuous audio
                                pauseAudioForCard(cardId);
                            }
                        }
                    });
                });
                
                const card = document.getElementById(`card-${cardId}`);
                observer.observe(card, { attributes: true });
                
                // Preload the audio
                audioElement.load();
            }
            
            // Start loading audio
            loadAudio();
        }

        // Play audio for current card
        function playAudioForCard(cardId, isContinuous = false) {
            const audioElement = audioElements[cardId];
            if (audioElement && audioElement.src) {
                // Reset and play
                audioElement.currentTime = 0;
                
                // If this is continuous audio, track it
                if (isContinuous && cardId === 23) {
                    continuousAudioPlaying = cardId;
                }
                
                const playPromise = audioElement.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log(`Audio playing for card ${cardId}`);
                    }).catch(error => {
                        console.log(`Auto-play failed for card ${cardId}:`, error);
                        // Show manual play instruction
                        const errorElement = document.getElementById(`audio-error-${cardId}`);
                        if (errorElement) {
                            errorElement.textContent = "Click to play audio";
                            errorElement.style.display = 'block';
                            errorElement.style.cursor = 'pointer';
                            errorElement.onclick = () => {
                                audioElement.play();
                                errorElement.style.display = 'none';
                            };
                        }
                    });
                }
            }
        }

        // Pause audio for card
        function pauseAudioForCard(cardId) {
            const audioElement = audioElements[cardId];
            if (audioElement) {
                audioElement.pause();
            }
        }

        // Set dynamic theme for music cards with smooth transition
        function setDynamicTheme(cardId) {
            const card = cards.find(c => c.id === cardId);
            
            // Store previous theme for gradient transition
            previousTheme = document.body.className;
            
            // Add transition class for smooth theme change
            document.body.classList.add('theme-transition');
            
            // Remove all theme classes
            document.body.classList.remove(
                'theme-true-colors', 'theme-this-town', 'theme-naiilang',
                'theme-cowboy-in-la', 'theme-anything-4-u', 
                'theme-a-couple-minutes', 'theme-godspeed',
                'black-theme', 'theme-a-prayer', 'theme-white-continue'
            );
            
            // Apply specific theme if card has one
            if (card && card.theme) {
                document.body.classList.add(card.theme);
            }
            // Apply white theme for cards 24-26 (continuation of prayer theme)
            else if (cardId >= 24 && cardId <= 26) {
                document.body.classList.add('theme-white-continue');
            }
            
            // Remove transition class after animation completes
            setTimeout(() => {
                document.body.classList.remove('theme-transition');
            }, 1500);
            
            // Log theme change for debugging
            console.log(`Theme changed: ${previousTheme} -> ${document.body.className}`);
        }

        // Initialize firework effect for card 18
        function initFireworkEffect() {
            const fireworkContainer = document.getElementById('fireworkContainer');
            if (!fireworkContainer) return;
            
            // Clear existing fireworks
            fireworkContainer.innerHTML = '';
            
            // Create multiple fireworks
            function createFirework() {
                const firework = document.createElement('div');
                firework.className = 'firework';
                
                // Random position
                const x = Math.random() * 80 + 10; // 10% to 90%
                const y = Math.random() * 50 + 10; // 10% to 60%
                const initialY = 100;
                const finalY = -100;
                const initialSize = Math.random() * 8 + 3;
                
                firework.style.setProperty('--x', `${x}%`);
                firework.style.setProperty('--initialY', `${initialY}%`);
                firework.style.setProperty('--finalY', `${finalY}%`);
                firework.style.setProperty('--initialSize', `${initialSize}vmin`);
                firework.style.left = `${x}%`;
                firework.style.top = `${y}%`;
                firework.style.animationDuration = `${Math.random() * 1.5 + 1}s`;
                
                fireworkContainer.appendChild(firework);
                
                // Create particles
                const particleCount = 12;
                for (let i = 0; i < particleCount; i++) {
                    setTimeout(() => {
                        const particle = document.createElement('div');
                        particle.className = 'firework-particle';
                        
                        // Random colors
                        const colors = ['#ff3333', '#ff9933', '#ffff33', '#33ff33', '#3399ff', '#9933ff', '#ff33cc', '#33ffcc'];
                        const color = colors[Math.floor(Math.random() * colors.length)];
                        
                        particle.style.backgroundColor = color;
                        particle.style.left = `${x}%`;
                        particle.style.top = `${y}%`;
                        
                        // Random angle and distance
                        const angle = Math.random() * 360;
                        const distance = Math.random() * 30 + 20;
                        particle.style.setProperty('--angle', `${Math.cos(angle * Math.PI / 180) * distance}%`);
                        particle.style.setProperty('--distance', `${Math.sin(angle * Math.PI / 180) * distance}%`);
                        particle.style.animationDelay = `${Math.random() * 0.5}s`;
                        
                        fireworkContainer.appendChild(particle);
                        
                        // Remove particle after animation
                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        }, 1500);
                    }, i * 50);
                }
                
                // Remove firework after animation
                setTimeout(() => {
                    if (firework.parentNode) {
                        firework.parentNode.removeChild(firework);
                    }
                }, 2000);
            }
            
            // Create initial burst of fireworks
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 300);
            }
            
            // Create continuous fireworks
            if (fireworkInterval) {
                clearInterval(fireworkInterval);
            }
            
            fireworkInterval = setInterval(() => {
                createFirework();
            }, 800);
        }

        // Stop firework effect
        function stopFireworkEffect() {
            if (fireworkInterval) {
                clearInterval(fireworkInterval);
                fireworkInterval = null;
            }
            
            const fireworkContainer = document.getElementById('fireworkContainer');
            if (fireworkContainer) {
                fireworkContainer.innerHTML = '';
            }
        }

        // Initialize event listeners
        function initEventListeners() {
            // Start button for card 1
            const startBtn = document.getElementById('startBtn');
            if (startBtn) {
                startBtn.addEventListener('click', function() {
                    const description = document.querySelector('#card-1 .card-description');
                    if (description) {
                        description.style.display = 'block';
                        startBtn.style.display = 'none';
                    }
                });
            }
            
            // Navigation buttons
            document.getElementById('prevBtn').addEventListener('click', showPrevCard);
            document.getElementById('nextBtn').addEventListener('click', showNextCard);
            document.getElementById('replayBtn').addEventListener('click', replayCard);
            
            // Yes/No buttons for card 17
            const yesBtn = document.getElementById('yesBtn');
            const noBtn = document.getElementById('noBtn');
            
            if (yesBtn) {
                yesBtn.addEventListener('click', function() {
                    // Create hearts animation
                    createHeartsAnimation();
                    
                    // Show next card after delay
                    setTimeout(() => {
                        showNextCard();
                    }, 2000);
                });
            }
            
            if (noBtn) {
                noBtn.addEventListener('click', function() {
                    noButtonClickCount++;
                    
                    if (noButtonClickCount === 1) {
                        // Teleport the button
                        teleportButton(noBtn);
                    } else if (noButtonClickCount === 2) {
                        // Change text
                        noBtn.textContent = "Pls dont";
                        teleportButton(noBtn);
                    } else {
                        // Keep teleporting
                        teleportButton(noBtn);
                    }
                });
            }
            
            // See Next button for card 18
            const seeNextBtn = document.getElementById('seeNextBtn');
            if (seeNextBtn) {
                seeNextBtn.addEventListener('click', function() {
                    showNextCard();
                });
            }
            
            // Week button for card 21
            const weekBtn = document.getElementById('weekBtn');
            if (weekBtn) {
                weekBtn.addEventListener('click', function() {
                    showNextCard();
                });
            }
        }

        // Teleport button (for NO button) - UPDATED: Fixed to stay within visible frame
        function teleportButton(button) {
            const card = document.getElementById(`card-17`);
            if (!card) return;
            
            // Get card dimensions
            const cardRect = card.getBoundingClientRect();
            const buttonRect = button.getBoundingClientRect();
            
            // Calculate available space within the card (with padding)
            const padding = 20;
            
            // Get the actual visible card area (excluding the image and text)
            // The image is near the top, so we want to avoid overlapping it
            // We'll keep the button in the lower 60% of the card
            const cardContentArea = cardRect.height * 0.6; // Lower 60%
            const startFrom = cardRect.height * 0.4; // Start from 40% from top
            
            // Calculate maximum position that keeps button fully visible
            const maxLeft = cardRect.width - buttonRect.width - padding;
            const maxTop = cardRect.height - buttonRect.height - padding;
            const minTop = startFrom + padding; // Start below the image/text area
            
            // Ensure we have enough space
            if (maxLeft <= padding || maxTop <= minTop) {
                console.log("Not enough space for teleportation");
                return;
            }
            
            // Random position within safe zone
            const randomX = padding + Math.random() * (maxLeft - padding);
            const randomY = minTop + Math.random() * (maxTop - minTop);
            
            // Set position relative to the card
            button.style.position = 'absolute';
            button.style.left = `${randomX}px`;
            button.style.top = `${randomY}px`;
            button.style.zIndex = '101';
            
            // Ensure button is visible
            button.style.opacity = '1';
            button.style.visibility = 'visible';
            button.style.display = 'block';
            
            // Add a quick fade-in effect
            button.style.transition = 'left 0.3s ease, top 0.3s ease, opacity 0.3s ease';
            setTimeout(() => {
                button.style.transition = '';
            }, 300);
        }

        // Show next card with animation
        function showNextCard() {
            if (currentCardIndex >= cards.length - 1) return;
            
            const currentCard = document.getElementById(`card-${cards[currentCardIndex].id}`);
            const nextCard = document.getElementById(`card-${cards[currentCardIndex + 1].id}`);
            
            // Stop fireworks if leaving card 18
            if (cards[currentCardIndex].id === 18) {
                stopFireworkEffect();
            }
            
            // Set dynamic theme for next card
            setDynamicTheme(cards[currentCardIndex + 1].id);
            
            // Pause audio of current card (unless it's continuous audio from card 23 onwards)
            if (cards[currentCardIndex].id >= 9 && cards[currentCardIndex].id <= 16) {
                pauseAudioForCard(cards[currentCardIndex].id);
            }
            
            // Stop beauty stars if leaving card 5
            if (cards[currentCardIndex].id === 5 && beautyStarsInterval) {
                clearInterval(beautyStarsInterval);
            }
            
            // Animate cards
            currentCard.classList.remove('active');
            currentCard.classList.add('prev');
            
            nextCard.classList.remove('next');
            nextCard.classList.add('active');
            
            // Update current card index
            currentCardIndex++;
            
            // Initialize stars for card 5 if needed
            if (cards[currentCardIndex].id === 5) {
                setTimeout(() => {
                    initStarsAnimation();
                    initBeautyStars();
                }, 500);
            }
            
            // Initialize fireworks for card 18
            if (cards[currentCardIndex].id === 18) {
                setTimeout(() => {
                    initFireworkEffect();
                }, 500);
            }
            
            // Play audio for cards 9-16
            if (cards[currentCardIndex].id >= 9 && cards[currentCardIndex].id <= 16) {
                setTimeout(() => {
                    playAudioForCard(cards[currentCardIndex].id);
                }, 500);
            }
            
            // If continuous audio is playing (from card 23), keep it playing
            if (continuousAudioPlaying && cards[currentCardIndex].id >= 24 && cards[currentCardIndex].id <= 26) {
                // Ensure continuous audio keeps playing
                const audioElement = audioElements[continuousAudioPlaying];
                if (audioElement && audioElement.paused) {
                    audioElement.play();
                }
            }
            
            // Play continuous audio if starting from card 23
            if (cards[currentCardIndex].id === 23) {
                setTimeout(() => {
                    playAudioForCard(cards[currentCardIndex].id, true);
                }, 500);
            }
        }

        // Show previous card with animation
        function showPrevCard() {
            if (currentCardIndex <= 0) return;
            
            const currentCard = document.getElementById(`card-${cards[currentCardIndex].id}`);
            const prevCard = document.getElementById(`card-${cards[currentCardIndex - 1].id}`);
            
            // Stop fireworks if leaving card 18
            if (cards[currentCardIndex].id === 18) {
                stopFireworkEffect();
            }
            
            // Set dynamic theme for previous card
            setDynamicTheme(cards[currentCardIndex - 1].id);
            
            // Pause audio of current card (unless it's continuous audio)
            if (cards[currentCardIndex].id >= 9 && cards[currentCardIndex].id <= 16) {
                pauseAudioForCard(cards[currentCardIndex].id);
            }
            
            // Stop beauty stars if leaving card 5
            if (cards[currentCardIndex].id === 5 && beautyStarsInterval) {
                clearInterval(beautyStarsInterval);
            }
            
            // Animate cards
            currentCard.classList.remove('active');
            currentCard.classList.add('next');
            
            prevCard.classList.remove('prev');
            prevCard.classList.add('active');
            
            // Update current card index
            currentCardIndex--;
            
            // Initialize stars for card 5 if needed
            if (cards[currentCardIndex].id === 5) {
                setTimeout(() => {
                    initStarsAnimation();
                    initBeautyStars();
                }, 500);
            }
            
            // Initialize fireworks for card 18
            if (cards[currentCardIndex].id === 18) {
                setTimeout(() => {
                    initFireworkEffect();
                }, 500);
            }
            
            // Play audio for cards 9-16
            if (cards[currentCardIndex].id >= 9 && cards[currentCardIndex].id <= 16) {
                setTimeout(() => {
                    playAudioForCard(cards[currentCardIndex].id);
                }, 500);
            }
            
            // If going back to card 23 or earlier while continuous audio is playing
            if (continuousAudioPlaying && cards[currentCardIndex].id <= 23) {
                // Play the continuous audio if we're on card 23
                if (cards[currentCardIndex].id === 23) {
                    setTimeout(() => {
                        playAudioForCard(cards[currentCardIndex].id, true);
                    }, 500);
                }
            }
        }

        // Replay current card
        function replayCard() {
            const currentCard = document.getElementById(`card-${cards[currentCardIndex].id}`);
            
            // Set theme based on current card
            setDynamicTheme(cards[currentCardIndex].id);
            
            // Re-init fireworks for card 18
            if (cards[currentCardIndex].id === 18) {
                stopFireworkEffect();
                setTimeout(() => {
                    initFireworkEffect();
                }, 300);
            }
            
            // Reset animation
            currentCard.classList.remove('active');
            setTimeout(() => {
                currentCard.classList.add('active');
            }, 10);
            
            // Replay audio if applicable
            if (cards[currentCardIndex].id >= 9 && cards[currentCardIndex].id <= 16) {
                setTimeout(() => {
                    playAudioForCard(cards[currentCardIndex].id);
                }, 300);
            }
            
            // Re-init stars for card 5
            if (cards[currentCardIndex].id === 5) {
                const starsContainer = document.querySelector('#starsContainer');
                if (starsContainer) {
                    starsContainer.innerHTML = '';
                }
                
                // Clear beauty stars container
                const beautyContainer = document.getElementById('beautyStarsContainer');
                if (beautyContainer) {
                    beautyContainer.innerHTML = '';
                }
                
                // Clear interval and restart
                if (beautyStarsInterval) {
                    clearInterval(beautyStarsInterval);
                }
                
                setTimeout(() => {
                    initStarsAnimation();
                    initBeautyStars();
                }, 500);
            }
            
            // Re-init envelope for card 26
            if (cards[currentCardIndex].id === 26) {
                const envelope = document.getElementById('envelope-final');
                const revealBtn = document.getElementById('reveal-btn-final');
                
                if (envelope && envelope.classList.contains('open')) {
                    // Reset envelope to closed state
                    envelope.classList.remove('open');
                    envelope.style.transform = '';
                    
                    // Reset button
                    if (revealBtn) {
                        revealBtn.innerHTML = '<i class="fas fa-heart"></i> Reveal Word';
                        revealBtn.disabled = false;
                    }
                }
            }
        }

        // Create hearts animation
        function createHeartsAnimation() {
            const heartAnimation = document.getElementById('heartAnimation');
            if (!heartAnimation) return;
            
            // Clear any existing hearts
            heartAnimation.innerHTML = '';
            
            // Create hearts
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '❤️';
                
                // Random horizontal position
                const leftPos = Math.random() * 100;
                heart.style.left = `${leftPos}%`;
                
                // Random animation delay
                heart.style.animationDelay = `${i * 0.2}s`;
                
                heartAnimation.appendChild(heart);
                
                // Create roses (every 5 hearts)
                if (i % 5 === 0) {
                    const rose = document.createElement('div');
                        rose.className = 'rose';
                        rose.innerHTML = '🌹';
                        
                        // Random horizontal position
                        const roseLeftPos = Math.random() * 100;
                        rose.style.left = `${roseLeftPos}%`;
                        
                        // Random animation delay
                        rose.style.animationDelay = `${i * 0.2 + 0.5}s`;
                        
                        heartAnimation.appendChild(rose);
                }
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initCards();
            
            // Set initial theme
            setDynamicTheme(1);
            
            // Add audio permission message
            setTimeout(() => {
                console.log("If audio doesn't play automatically, please allow autoplay in your browser settings.");
            }, 1000);
        });
    </script>
</body>
</html>
